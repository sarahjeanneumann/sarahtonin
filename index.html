<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Sarahtonin Index</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700&display=swap" rel="stylesheet" />
  </head>
  <body>
    <div id="drop-zone">
      <div id="app">
        <!-- Header -->
        <header class="app-header">
          <div class="header-left">
            <svg class="logo-icon" viewBox="0 0 48 48" width="38" height="38">
              <!-- Tree ring circles -->
              <circle cx="24" cy="24" r="20" fill="none" stroke="#7ed87e" stroke-width="1" opacity="0.25"/>
              <circle cx="24" cy="24" r="15" fill="none" stroke="#7ed87e" stroke-width="0.8" opacity="0.18"/>
              <circle cx="24" cy="24" r="10" fill="none" stroke="#7ed87e" stroke-width="0.6" opacity="0.12"/>
              <!-- Stress pulse line through the center -->
              <polyline
                points="4,24 12,24 15,24 18,16 21,32 24,12 27,34 30,18 33,24 36,24 44,24"
                fill="none" stroke="#f0c050" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"
              />
              <!-- Leaf sprouting from top -->
              <path d="M24,4 Q30,6 28,12 Q26,8 24,4 Z" fill="#7ed87e" opacity="0.7"/>
              <path d="M24,4 Q18,6 20,12 Q22,8 24,4 Z" fill="#7ed87e" opacity="0.5"/>
              <line x1="24" y1="4" x2="24" y2="11" stroke="#7ed87e" stroke-width="0.6" opacity="0.4"/>
            </svg>
            <div class="header-title-group">
              <h1>The Sarahtonin Index</h1>
              <span class="header-subtitle">stress data, forest-bathed</span>
            </div>
          </div>
          <div class="header-actions">
            <input type="file" id="csv-upload" accept=".csv,.txt" hidden />
            <button id="btn-upload" class="btn btn-primary">Upload CSV</button>
            <button id="btn-clear" class="btn btn-danger">Clear Data</button>
          </div>
        </header>

        <!-- Data status -->
        <div id="data-status" class="data-status no-data">No data loaded</div>

        <!-- Chart -->
        <section class="section chart-section">
          <div class="chart-wrapper">
            <canvas id="stress-chart"></canvas>
          </div>
          <p class="chart-hint">Drag and drop a CSV file anywhere on the page to load data</p>
        </section>

        <!-- Waypoint Controls -->
        <section class="section">
          <h2 class="section-title">Waypoints</h2>
          <div class="waypoint-controls">
            <div class="wp-form">
              <div class="wp-field">
                <label for="wp-date">Date</label>
                <input type="date" id="wp-date" />
              </div>
              <div class="wp-field">
                <label for="wp-label">Label</label>
                <input type="text" id="wp-label" placeholder="e.g. Started medication" />
              </div>
              <div class="wp-field wp-field-color">
                <label for="wp-color">Color</label>
                <input type="color" id="wp-color" value="#e8725a" />
              </div>
              <button id="btn-add-waypoint" class="btn btn-accent">Add Waypoint</button>
            </div>
            <div id="waypoint-list"></div>
          </div>
        </section>

        <!-- Segment Cards -->
        <section class="section">
          <h2 class="section-title">Segment Statistics</h2>
          <div id="segment-cards" class="segment-cards-container"></div>
        </section>

        <!-- Comparison Panel -->
        <section class="section">
          <h2 class="section-title" id="comparison-title">Waypoint Comparison</h2>
          <div id="comparison-panel"></div>
        </section>

        <!-- Footer -->
        <footer class="app-footer">
          <p>Data stored locally in your browser. Nothing is sent to any server.</p>
          <p class="csv-format-hint">CSV format: <code>date,stress_score</code> (e.g. <code>2024-01-15,42</code>)</p>
          <p class="photo-credit">Photo by <a href="https://unsplash.com/@lukasz_rawa" target="_blank" rel="noopener">Lukasz Szmigiel</a> on <a href="https://unsplash.com" target="_blank" rel="noopener">Unsplash</a></p>
        </footer>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
