<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Garmin Stress Analyzer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700&display=swap" rel="stylesheet" />
  </head>
  <body>
    <div id="drop-zone">
      <div id="app">
        <!-- Header -->
        <header class="app-header">
          <div class="header-left">
            <svg class="logo-icon" viewBox="0 0 32 32" width="28" height="28">
              <path d="M16 2 L8 12 L4 28 L16 24 L28 28 L24 12 Z" fill="none" stroke="#6abf69" stroke-width="1.5"/>
              <path d="M16 8 L12 16 L10 26 L16 22 L22 26 L20 16 Z" fill="#6abf69" opacity="0.3"/>
              <line x1="16" y1="2" x2="16" y2="24" stroke="#6abf69" stroke-width="1" opacity="0.5"/>
            </svg>
            <h1>Garmin Stress Analyzer</h1>
          </div>
          <div class="header-actions">
            <input type="file" id="csv-upload" accept=".csv,.txt" hidden />
            <button id="btn-upload" class="btn btn-primary">Upload CSV</button>
            <button id="btn-clear" class="btn btn-danger">Clear Data</button>
          </div>
        </header>

        <!-- Data status -->
        <div id="data-status" class="data-status no-data">No data loaded</div>

        <!-- Chart -->
        <section class="section chart-section">
          <div class="chart-wrapper">
            <canvas id="stress-chart"></canvas>
          </div>
          <p class="chart-hint">Drag and drop a CSV file anywhere on the page to load data</p>
        </section>

        <!-- Waypoint Controls -->
        <section class="section">
          <h2 class="section-title">Waypoints</h2>
          <div class="waypoint-controls">
            <div class="wp-form">
              <div class="wp-field">
                <label for="wp-date">Date</label>
                <input type="date" id="wp-date" />
              </div>
              <div class="wp-field">
                <label for="wp-label">Label</label>
                <input type="text" id="wp-label" placeholder="e.g. Started medication" />
              </div>
              <div class="wp-field wp-field-color">
                <label for="wp-color">Color</label>
                <input type="color" id="wp-color" value="#e8725a" />
              </div>
              <button id="btn-add-waypoint" class="btn btn-accent">Add Waypoint</button>
            </div>
            <div id="waypoint-list"></div>
          </div>
        </section>

        <!-- Segment Cards -->
        <section class="section">
          <h2 class="section-title">Segment Statistics</h2>
          <div id="segment-cards" class="segment-cards-container"></div>
        </section>

        <!-- Comparison Panel -->
        <section class="section">
          <h2 class="section-title" id="comparison-title">Waypoint Comparison</h2>
          <div id="comparison-panel"></div>
        </section>

        <!-- Footer -->
        <footer class="app-footer">
          <p>Data stored locally in your browser. Nothing is sent to any server.</p>
          <p class="csv-format-hint">CSV format: <code>date,stress_score</code> (e.g. <code>2024-01-15,42</code>)</p>
        </footer>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
